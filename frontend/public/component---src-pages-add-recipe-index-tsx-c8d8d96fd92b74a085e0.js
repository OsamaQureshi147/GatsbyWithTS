(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[268],{6672:function(e,t,n){"use strict";n.r(t);var a=n(2137),r=n(7329),c=n(7757),s=n.n(c),l=n(7294),i=n(778),u=n(1939),o=n(7264);t.default=function(e){e.session;var t=e.username,n=(0,l.useState)(),c=n[0];n[1];console.log("Session in add recipe page",t);var m=(0,l.useState)({name:"",username:c,category:"Breakfast",description:"",instructions:""}),p=m[0],d=m[1],f=(0,i.useMutation)(u.JL,{update:function(e,t){var n=t.data.addRecipe,a=e.readQuery({query:o.N}).getAllRecipes;e.writeQuery({query:o.N,data:{getAllRecipes:[].concat((0,r.Z)(a),[n])}})},onCompleted:function(){d({name:"",category:"breakfast",description:"",instructions:"",username:""})}})[0],g=function(e){var t;d(Object.assign({},p,((t={})[e.target.name]=e.target.value,t)))},b=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Submitted with data",p),e.next=4,f({variables:p});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.createElement(l.Fragment,null,l.createElement("div",{className:"recipe-container"},l.createElement("form",{className:"recipe-form",onSubmit:b},l.createElement("h2",{id:"title"},"Add Recipe"),l.createElement("label",{className:"label"},"Name*"),l.createElement("input",{className:"input",type:"text",placeholder:"Enter Name",required:!0,name:"name",onChange:g}),l.createElement("label",{className:"label"},"Category*"),l.createElement("select",{className:"input",name:"category",value:p.category,onChange:g},l.createElement("option",{value:"breakfast"},"Breakfast"),l.createElement("option",{value:"lunch"},"Lunch"),l.createElement("option",{value:"dinner"},"Dinner"),l.createElement("option",{value:"snack"},"Snack")),l.createElement("label",{className:"label"},"Description*"),l.createElement("input",{className:"input",type:"text",name:"description",placeholder:"Enter Description",onChange:g,required:!0}),l.createElement("label",{className:"label"},"Instructions*"),l.createElement("textarea",{className:"input",rows:5,placeholder:"Enter Instructions",name:"instructions",onChange:g,required:!0}),l.createElement("button",{className:"submit-button"},"Submit"))))}},7264:function(e,t,n){"use strict";n.d(t,{N:function(){return l},P:function(){return i}});var a,r,c=n(5761),s=n(103),l=(0,s.ZP)(a||(a=(0,c.Z)(["\n  query {\n    getAllRecipes {\n      _id\n      name\n      category\n      description\n      instructions\n      createdDate\n      likes\n      username\n    }\n  }\n"]))),i=(0,s.ZP)(r||(r=(0,c.Z)(["\n  query {\n  getCurrentUser {\n    username\n    email\n    joinDate\n  }\n}\n"])))}}]);
//# sourceMappingURL=component---src-pages-add-recipe-index-tsx-c8d8d96fd92b74a085e0.js.map