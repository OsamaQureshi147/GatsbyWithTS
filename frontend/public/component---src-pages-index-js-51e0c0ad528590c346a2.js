(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[678,891,526,869],{4322:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n,r=a(7294),l=a(3155),o=a(9499),c=a(2512),s=a(697),i=a(6672),u=a(778),m=a(7264),p=(n=function(e){var t=e.session;return e.refetch,r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("nav",null,r.createElement(o.Link,{to:"/"},"Home"),r.createElement(o.Link,{to:"login"},"Login"),r.createElement(o.Link,{to:"register"},"Register"),r.createElement(o.Link,{to:"xyz"},"Add Recipe"))),r.createElement(o.Router,null,r.createElement(l.default,{path:"/"}),r.createElement(c.default,{path:"/login"}),r.createElement(s.default,{path:"/register"}),r.createElement(i.default,{path:"/xyz",session:t,username:"Hello World"})))},function(e){var t=(0,u.useQuery)(m.P,{onCompleted:function(e){console.log(e)},onError:function(e){var t=e.networkError,a=e.graphQLErrors;t&&console.log(t),a&&a.map((function(e){var t=e.message;return console.log(t)}))}}),a=t.data,l=t.loading,o=t.refetch;return t.error,l?null:r.createElement(n,Object.assign({},e,{session:a,refetch:o}))})},6672:function(e,t,a){"use strict";a.r(t);var n=a(2137),r=a(7329),l=a(7757),o=a.n(l),c=a(7294),s=a(778),i=a(1939),u=a(7264);t.default=function(e){e.session;var t=e.username,a=(0,c.useState)(),l=a[0];a[1];console.log("Session in add recipe page",t);var m=(0,c.useState)({name:"",username:l,category:"Breakfast",description:"",instructions:""}),p=m[0],d=m[1],E=(0,s.useMutation)(i.JL,{update:function(e,t){var a=t.data.addRecipe,n=e.readQuery({query:u.N}).getAllRecipes;e.writeQuery({query:u.N,data:{getAllRecipes:[].concat((0,r.Z)(n),[a])}})},onCompleted:function(){d({name:"",category:"breakfast",description:"",instructions:"",username:""})}})[0],f=function(e){var t;d(Object.assign({},p,((t={})[e.target.name]=e.target.value,t)))},g=function(){var e=(0,n.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Submitted with data",p),e.next=4,E({variables:p});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.createElement(c.Fragment,null,c.createElement("div",{className:"recipe-container"},c.createElement("form",{className:"recipe-form",onSubmit:g},c.createElement("h2",{id:"title"},"Add Recipe"),c.createElement("label",{className:"label"},"Name*"),c.createElement("input",{className:"input",type:"text",placeholder:"Enter Name",required:!0,name:"name",onChange:f}),c.createElement("label",{className:"label"},"Category*"),c.createElement("select",{className:"input",name:"category",value:p.category,onChange:f},c.createElement("option",{value:"breakfast"},"Breakfast"),c.createElement("option",{value:"lunch"},"Lunch"),c.createElement("option",{value:"dinner"},"Dinner"),c.createElement("option",{value:"snack"},"Snack")),c.createElement("label",{className:"label"},"Description*"),c.createElement("input",{className:"input",type:"text",name:"description",placeholder:"Enter Description",onChange:f,required:!0}),c.createElement("label",{className:"label"},"Instructions*"),c.createElement("textarea",{className:"input",rows:5,placeholder:"Enter Instructions",name:"instructions",onChange:f,required:!0}),c.createElement("button",{className:"submit-button"},"Submit"))))}},2512:function(e,t,a){"use strict";a.r(t);var n=a(2137),r=a(7757),l=a.n(r),o=a(7294),c=a(778),s=a(5313),i=a(4251),u=a(1939);t.default=function(){var e,t=(0,o.useState)(""),a=t[0],r=t[1],m=(0,o.useState)(""),p=m[0],d=m[1],E=(0,o.useState)(""),f=E[0],g=E[1],v=(0,c.useMutation)(u.lW,{onCompleted:(e=(0,n.Z)(l().mark((function e(t){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.signinUser,localStorage.setItem("token",a.token),(0,s.navigate)("/",{replace:!0}),g("");case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:function(e){var t=e.networkError,a=e.graphQLErrors;t&&console.log("Network Error:",t.message),a&&a.map((function(e){var t=e.message;g(t),console.log("gQL Error",f)}))}}),b=v[0],h=(v[1].loading,function(){var e=(0,n.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b({variables:{email:a,password:p}});case 3:r(""),d("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return o.createElement(o.Fragment,null,o.createElement(i.Z,{title:"Recipe | Login"}),o.createElement("div",{className:"container"},o.createElement("div",{className:"background-image"}),o.createElement("div",{className:"login-container"},o.createElement("div",{className:"card-container"},o.createElement("form",{className:"form",onSubmit:h},o.createElement("h3",{id:"title"},"Login"),o.createElement("label",{className:"label"},"Email Address*"),o.createElement("input",{className:"input",type:"email",placeholder:"Enter Email",required:!0,value:a,onChange:function(e){return r(e.currentTarget.value)}}),o.createElement("label",{className:"label"},"Password*"),o.createElement("input",{className:"input",type:"password",placeholder:"Enter Password",value:p,required:!0,onChange:function(e){return d(e.currentTarget.value)}}),o.createElement("div",{className:"check-box-container"},o.createElement("input",{className:"check-box",type:"checkbox"}),o.createElement("label",null,"Remember me")),o.createElement("button",{className:"submit-button"},"Submit"),o.createElement("label",{className:"forgot-password"},"Forgot ",o.createElement("b",{style:{color:"gold"}},"Password?")))))))}},697:function(e,t,a){"use strict";a.r(t);var n=a(2137),r=a(7757),l=a.n(r),o=a(7294),c=a(778),s=a(5313),i=a(1939);t.default=function(){var e,t={username:"",email:"",password:"",confirm_password:""},a=(0,c.useMutation)(i.qK,{onError:function(e){var t=e.networkError,a=e.graphQLErrors;t&&console.log("NetworkError:",t.message),a&&a.map((function(e){var t=e.message;console.log(t)}))},onCompleted:(e=(0,n.Z)(l().mark((function e(a){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.signupUser,localStorage.setItem("token",n.token),(0,s.navigate)("/",{replace:!0}),p(t);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}),r=a[0],u=(a[1].loading,(0,o.useState)(t)),m=u[0],p=u[1],d=m.username,E=m.email,f=m.password,g=m.confirm_password,v=function(e){var t;p(Object.assign({},m,((t={})[e.target.name]=e.target.value,t)))};return o.createElement("div",{className:"container"},o.createElement("div",{className:"background-image"}),o.createElement("div",{className:"login-container"},o.createElement("div",{className:"card-container"},o.createElement("form",{className:"form",onSubmit:function(e){var t=m.username,a=m.email,n=m.password;n===m.confirm_password&&(e.preventDefault(),r({variables:{username:t,email:a,password:n}}))}},o.createElement("h3",{id:"title"},"Register"),o.createElement("label",{className:"label"},"Username"),o.createElement("input",{name:"username",className:"input",type:"text",placeholder:"Enter Username",required:!0,value:d,onChange:v}),o.createElement("label",{className:"label"},"Email Address*"),o.createElement("input",{name:"email",className:"input",type:"email",placeholder:"Enter Email",required:!0,value:E,onChange:v}),o.createElement("label",{className:"label"},"Password*"),o.createElement("input",{name:"password",className:"input",type:"password",placeholder:"Enter Password",value:f,onChange:v,required:!0}),o.createElement("label",{className:"label"},"Confirm Password*"),o.createElement("input",{name:"confirm_password",className:"input",type:"password",placeholder:"Enter Password",value:g,onChange:v,required:!0}),o.createElement("button",{className:"submit-button"},"Submit"),o.createElement("label",{className:"forgot-password"},"Already have an account?"," ",o.createElement("b",{style:{color:"gold"}},o.createElement(s.Link,{to:"../login"},"Sign In")))))))}},4251:function(e,t,a){"use strict";var n=a(7294),r=a(5414),l=a(5313);function o(e){var t,a=e.description,o=e.lang,c=e.meta,s=e.title,i=(0,l.useStaticQuery)("63159454").site,u=a||i.siteMetadata.description;return n.createElement(r.q,{htmlAttributes:{lang:o},title:s,meta:[{name:"description",content:u},{property:"og:title",content:s},{property:"og:description",content:u},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:(null===(t=i.siteMetadata)||void 0===t?void 0:t.author)||""},{name:"twitter:title",content:s},{name:"twitter:description",content:u}].concat(c)})}o.defaultProps={lang:"en",meta:[],description:""},t.Z=o},1517:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(7294),r=a(778),l=a(4899),o=a(5059),c=a(8618),s=a(9900),i=a(7839),u=a(8304),m=a.n(u);var p,d=a(4322),E=(0,l.L)({uri:"http://localhost:4000/graphql"}),f=(p=function(e,t){var a=t.headers,n=localStorage.getItem("token");return{headers:Object.assign({},a,{authorization:n?""+n:""})}},new i.i((function(e,t){var a=(0,s._T)(e,[]);return new(m())((function(n){var r;return Promise.resolve(a).then((function(t){return p(t,e.getContext())})).then(e.setContext).then((function(){r=t(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})})).catch(n.error.bind(n)),function(){r&&r.unsubscribe()}}))}))),g=new o.f({link:f.concat(E),cache:new c.h,connectToDevTools:!0}),v=function(){return n.createElement(r.ApolloProvider,{client:g},n.createElement(d.default,null))}}}]);
//# sourceMappingURL=component---src-pages-index-js-51e0c0ad528590c346a2.js.map